'use client';

import { useState, useCallback, useRef } from 'react';
import type { RegionStatus } from '@/lib/crm/types';

export interface RegionData {
  id: string;
  name: string;
  status: RegionStatus;
}

interface UKCoverageMapProps {
  regions: RegionData[];
}

const REGION_PATHS: Record<string, { d: string; name: string }> = {
  teesside: { d: 'M332.1,369.9L334.8,366.0L336.4,364.6L336.4,364.6L341.2,359.7L343.1,367.7L342.0,367.4L342.0,367.4L341.7,367.4L342.0,367.4L343.1,367.7L337.6,374.7L336.3,377.2L336.2,377.1L334.9,377.4L334.0,378.2L333.4,378.3L333.5,378.8L332.3,378.5L330.5,381.0L320.1,374.6L320.8,368.1L325.4,371.1ZM362.0,372.8L359.7,378.3L350.7,378.0L345.7,377.3L341.5,376.7L334.8,378.0L334.9,377.4L336.2,377.1L336.3,377.2L337.6,374.7L339.4,372.3L343.1,371.2L343.3,371.0L346.0,366.3Z', name: 'Teesside' },
  cheshire: { d: 'M271.2,470.8L274.8,467.7L274.0,467.1L267.8,469.4L268.1,468.2L271.5,464.0L274.1,465.3L274.7,460.0L279.3,460.6L283.4,459.4L285.3,462.9L286.3,465.1L291.5,467.5L294.9,467.3L297.5,469.3L297.5,469.3L297.7,469.4L297.7,469.4L298.2,469.5L298.2,469.5L304.6,466.4L306.7,478.6L296.3,486.1L288.7,490.9L288.4,495.2L281.5,499.2L273.7,495.5L272.4,496.4L272.4,496.3L269.9,495.5L269.8,495.5L269.8,495.5L268.4,495.6L268.3,495.6L266.8,493.6L266.0,491.1L266.1,490.7L264.7,488.0L264.7,487.7L262.2,485.3L262.1,478.8L255.4,475.0L255.4,475.0L255.0,474.5L254.7,472.2L255.3,471.6L255.3,471.5L263.0,471.3Z', name: 'Cheshire' },
  lancashire: { d: 'M288.9,443.3L288.9,446.1L288.9,446.1L288.5,446.1L285.2,445.3L285.2,445.3L282.4,446.5L279.4,448.8L279.4,448.8L279.2,448.6L279.2,448.6L279.2,448.4L279.2,448.4L279.2,448.4L279.2,448.4L277.1,449.1L274.2,448.2L272.2,454.8L267.9,457.5L264.9,456.1L257.6,453.0L262.3,442.4L262.3,442.4L262.1,441.4L262.1,441.4L261.8,441.0L261.8,441.0L261.8,440.9L267.9,440.6L267.6,440.7L267.5,441.2L268.2,441.9L268.1,441.9L267.9,442.2L267.9,442.3L268.2,442.4L268.2,442.7L268.2,442.9L268.6,444.4L268.2,442.7L268.2,442.4L267.9,442.3L267.9,442.2L268.1,441.9L268.2,441.9L268.3,441.7L267.5,441.2L267.6,440.7L267.9,440.6L271.0,436.3L272.5,436.3L272.8,436.6L275.4,436.8L269.4,436.3L269.4,436.0L269.3,435.9L269.3,435.8L269.3,435.9L269.4,436.0L269.4,436.3L269.5,436.3L269.3,436.6L259.0,437.7L257.1,434.7L257.5,426.9L260.7,428.1L260.7,428.2L260.7,428.1L264.6,428.1L264.9,428.0L264.6,428.1L260.0,422.5L264.9,421.3L265.2,421.4L265.2,421.4L267.3,415.4L267.3,415.4L267.1,415.4L267.3,415.4L267.3,415.4L267.3,415.8L267.2,415.6L267.3,415.8L263.2,414.7L267.7,406.1L267.7,406.0L265.8,403.2L274.6,404.4L284.7,399.2L280.0,407.5L284.3,413.5L294.9,418.7L294.9,418.7L297.5,420.9L304.0,428.9L303.2,430.9L300.9,432.4L298.0,438.9L299.3,442.1L293.5,447.4Z', name: 'Lancashire' },
  east_riding: { d: 'M387.2,438.1L383.4,436.8L383.5,436.6L383.5,436.3L383.5,436.6L383.4,436.8L379.3,439.2L370.2,438.3L362.8,440.9L353.7,436.8L356.0,426.6L355.9,417.9L366.9,414.8L379.0,406.3L379.4,403.4L388.9,404.7L394.9,407.5L390.8,409.6L388.9,416.5L391.6,425.1L404.4,444.0L394.0,445.8L387.5,437.6L387.4,437.9Z', name: 'East Riding' },
  lincolnshire: { d: 'M403.7,457.3L403.6,457.4L403.6,457.4L403.7,457.4L403.7,457.3L405.6,456.8L413.6,474.1L414.3,488.3L408.0,492.6L400.3,502.7L395.5,505.5L395.6,505.5L397.1,504.9L401.5,501.5L408.7,508.5L408.7,508.6L406.7,515.2L397.3,521.0L388.9,520.6L381.4,521.4L381.4,521.4L375.9,522.7L375.8,522.7L378.8,517.7L368.0,513.8L362.8,502.4L362.7,496.9L365.6,490.6L365.5,481.4L367.9,476.6L362.8,476.0L362.8,475.6L363.0,475.3L363.0,475.1L363.7,472.5L362.6,465.5L362.7,464.2L360.8,461.0L364.6,454.8L366.7,441.0L373.1,442.2L385.1,439.6L389.3,445.6L399.6,454.4Z', name: 'Lincolnshire' },
  north_yorkshire: { d: 'M346.7,429.0L346.4,430.1L347.0,430.0L349.0,431.4L350.1,433.7L354.4,439.6L354.4,440.3L354.1,440.7L354.0,440.7L353.9,440.5L353.3,441.0L353.1,440.9L352.5,440.8L352.2,441.0L350.9,441.0L349.2,440.4L349.2,440.4L350.2,444.2L341.7,446.9L338.4,437.5L336.1,428.4L337.9,424.7L318.7,424.2L311.7,420.8L307.6,421.0L304.0,428.9L297.5,420.9L294.9,418.7L294.9,418.7L284.3,413.5L280.0,407.5L284.7,399.2L291.3,396.8L289.1,389.0L292.5,382.4L298.2,380.8L309.4,381.0L320.1,374.6L330.5,381.0L332.3,378.5L333.5,378.8L333.4,378.3L334.0,378.2L334.8,378.0L341.5,376.7L345.7,377.3L350.7,378.0L359.7,378.3L362.0,372.8L371.4,378.5L376.9,385.7L381.9,397.8L388.9,404.7L379.4,403.4L379.0,406.3L366.9,414.8L355.9,417.9L356.0,426.6L353.7,436.8L350.1,433.7L349.0,431.4L347.0,430.0L346.4,430.1Z', name: 'North Yorkshire' },
  derbyshire: { d: 'M337.6,504.9L324.7,518.1L323.0,518.0L323.0,518.0L322.9,518.1L322.9,518.1L319.8,515.6L325.0,507.7L317.9,505.2L312.8,500.4L316.3,491.6L314.7,484.9L314.7,484.9L310.8,479.7L306.7,478.6L304.6,466.4L304.9,461.8L307.8,455.6L310.3,453.4L314.3,454.7L315.3,457.8L322.1,464.8L324.7,471.0L327.7,471.3L327.7,471.3L337.4,469.7L338.9,469.7L338.9,469.7L339.4,471.2L343.2,471.0L342.7,478.3L340.4,482.4L337.1,488.8L336.9,491.0L337.0,492.4L337.0,492.4L337.1,492.7L337.1,492.7L338.2,494.8L339.1,497.5L339.1,497.5L341.3,503.4L340.0,504.8Z', name: 'Derbyshire' },
  leicestershire: { d: 'M360.3,531.9L357.0,536.4L354.8,535.2L354.8,535.2L349.3,538.7L349.3,538.7L349.2,538.7L349.2,538.7L349.2,538.5L349.2,538.5L348.1,538.9L348.1,538.9L347.3,539.4L347.3,539.4L346.7,539.6L346.7,539.6L343.1,541.2L338.2,533.9L337.4,533.3L333.1,530.8L331.1,529.4L326.4,526.0L326.9,520.6L325.1,519.1L324.7,518.1L337.6,504.9L340.0,504.8L340.3,509.7L343.2,511.2L343.2,511.2L343.5,510.9L343.5,510.9L344.0,510.6L344.0,510.6L349.9,509.3L349.9,509.3L350.8,509.3L355.1,506.3L355.1,506.3L360.8,498.1L362.7,496.9L362.8,502.4L368.0,513.8L378.8,517.7L375.8,522.7L369.4,527.6L369.4,527.6L367.7,528.6L367.7,528.6L367.5,528.9L365.7,531.5L361.9,532.1Z', name: 'Leicestershire' },
  nottinghamshire: { d: 'M341.3,503.4L339.1,497.5L339.1,497.5L338.2,494.8L337.1,492.7L337.1,492.7L337.0,492.4L337.0,492.4L336.9,491.0L337.1,488.8L340.4,482.4L342.7,478.3L343.2,471.0L347.1,463.6L352.4,461.4L355.4,456.2L361.8,459.8L362.7,464.2L363.7,472.5L362.8,475.6L362.5,479.9L362.8,476.0L367.9,476.6L365.5,481.4L365.6,490.6L362.7,496.9L360.8,498.1L355.1,506.3L355.1,506.3L350.8,509.3L349.9,509.3L349.9,509.3L344.0,510.6L344.0,510.6L343.5,510.9L343.5,510.9L343.2,511.2L343.2,511.2L340.3,509.7L340.0,504.8Z', name: 'Nottinghamshire' },
  herefordshire: { d: 'M277.0,547.0L277.0,547.0L277.2,547.1L277.2,547.1L277.5,548.0L278.1,550.4L278.1,550.4L277.0,553.1L286.2,550.8L285.9,558.3L289.5,559.8L289.8,569.6L284.5,575.6L284.5,575.6L284.6,575.7L284.6,575.7L285.7,579.0L275.9,584.3L275.2,583.6L274.7,583.5L274.5,583.4L273.2,583.3L266.3,576.7L261.0,578.3L254.6,566.5L256.1,559.0L255.6,559.3L255.6,559.4L255.6,555.6L261.3,551.5L259.5,550.4L259.4,550.4L260.8,546.4L261.8,544.8L262.6,543.9L262.6,543.9L263.7,542.3L263.7,542.3L268.8,541.9L273.1,547.9Z', name: 'Herefordshire' },
  shropshire: { d: 'M288.4,495.2L284.9,501.1L284.9,501.1L287.3,503.7L287.3,503.7L288.5,503.4L286.8,508.4L288.4,511.0L288.4,511.0L291.6,515.0L291.4,515.6L294.6,519.4L292.8,536.8L286.9,543.4L277.5,548.0L277.2,547.1L277.2,547.1L277.0,547.0L277.0,547.0L273.1,547.9L268.8,541.9L263.7,542.3L263.7,542.3L262.6,543.9L262.6,543.9L261.8,544.8L260.9,544.4L255.8,544.0L252.3,541.3L251.8,540.6L249.0,537.0L249.5,536.6L255.6,533.4L259.2,531.7L259.7,531.5L259.4,527.8L253.3,527.4L253.5,527.0L253.8,526.8L257.0,523.4L257.0,522.2L257.4,521.7L259.9,515.2L257.4,512.7L252.4,510.9L253.0,506.1L253.1,503.9L257.1,500.6L261.2,498.2L261.7,498.9L263.0,499.8L271.6,500.9L272.4,496.4L273.7,495.5L281.5,499.2Z', name: 'Shropshire' },
  staffordshire: { d: 'M310.8,479.7L314.7,484.9L314.7,484.9L316.3,491.6L312.8,500.4L317.9,505.2L325.0,507.7L319.8,515.6L322.9,518.1L322.9,518.1L323.0,518.0L323.0,518.0L324.7,518.1L325.1,519.1L322.5,521.4L320.0,526.4L315.9,526.7L312.0,526.9L308.2,521L306.7,522.7L303.7,524.2L297.2,525.5L299.9,529.3L298.3,535.6L298.3,535.6L298.5,538.7L298.3,539.2L292.8,536.8L294.6,519.4L291.4,515.6L291.6,515.0L288.4,511.0L288.4,511.0L286.8,508.4L288.5,503.4L287.3,503.7L287.3,503.7L284.9,501.1L284.9,501.1L288.4,495.2L288.7,490.9L296.3,486.1L306.7,478.6Z', name: 'Staffordshire' },
  somerset: { d: 'M290.0,636.1L291.0,639.8L286.9,648.6L278.3,647.6L277.4,652.7L267.7,656.6L267.7,656.6L265.1,656.7L265.1,656.7L262.3,658.0L262.3,658.0L261.9,658.8L257.3,652.4L253.1,653.7L252.2,649.7L242.2,647.3L240.5,643.6L231.8,645.1L230.2,641.5L222.5,637.1L220.9,632.6L226.3,628.5L234.6,628.5L240.7,632.1L257.2,630.5L260.1,635.0L259.8,636.4L260.5,637.1L259.8,636.4L260.1,635.0L257.2,632.7L260.0,623.4L260.8,617.0L272.8,608.6L278.7,616.3L281.8,613.7L282.4,613.9L292.4,613.9L292.7,621.6L293.1,623.0L293.1,623.0L294.7,626.9Z', name: 'Somerset' },
  bristol: { d: 'M281.8,613.7L282.4,613.9L281.8,613.7L278.7,616.3L272.8,608.6L274.9,605.4L282.4,609.4Z', name: 'Bristol' },
  gloucestershire: { d: 'M292.2,583.8L293.7,580.6L290.5,582.5L289.8,582.7L289.1,586.7L277.1,596.7L274.4,596.1L275.9,584.3L285.7,579.0L284.6,575.7L284.6,575.7L284.5,575.6L284.5,575.6L289.8,569.6L293.5,573.6L298.2,567.7L303.8,570.9L310.1,567.9L313.5,570.7L311.9,566.0L316.9,562.7L320.6,568.4L320.6,568.4L320.8,568.4L320.8,568.4L321.0,568.5L321.0,568.5L321.1,568.5L321.1,568.5L322.6,568.6L322.6,568.6L321.6,572.2L323.1,578.8L323.1,578.8L320.6,581.5L320.6,592.7L320.5,592.7L320.5,592.7L320.6,592.7L322.4,594.9L320.8,594.5L315.9,596.2L308.4,598.4L303.4,595.8L299.0,601.9L293.5,602.9L293.7,604.7L293.7,604.7L292.4,613.9L282.4,613.9L281.8,613.7L282.4,609.4L274.9,605.4L281.3,595.4L288.4,589.3L290.5,582.5Z', name: 'Gloucestershire' },
  devon: { d: 'M236.2,691.1L226.3,704.0L219.9,701.6L217.0,697.0L207.7,693.5L205.8,687.6L206.3,684.9L206.3,684.9L204.4,682.4L205.0,682.2L204.8,681.7L204.7,681.7L204.0,682.1L204.0,681.3L204.0,681.3L203.7,681.3L203.8,681.0L203.8,680.9L197.9,671.6L195.2,662.0L192.8,662.1L192.8,662.1L192.7,659.7L192.7,659.7L193.4,654.5L193.4,654.5L193.0,654.0L193.0,654.0L188.1,650.9L189.1,644.1L199.1,646.0L204.2,644.1L202.7,631.8L209.3,629.6L226.3,628.5L220.9,632.6L222.5,637.1L230.2,641.5L231.8,645.1L240.5,643.6L242.2,647.3L252.2,649.7L253.1,653.7L257.3,652.4L261.9,658.8L261.7,659.1L261.7,659.1L262.5,659.6L262.5,659.6L262.2,666.4L247.4,669.9L241.9,674.5L238.5,668.5L238.0,669.0L239.2,674.9L236.2,681.1L234.1,685.9L236.3,691.1Z', name: 'Devon' },
  dorset: { d: 'M303.0,649.2L308.1,646.4L314.9,651.1L315.2,660.7L320.3,665.0L316.8,665.4L316.7,665.0L316.5,665.2L316.7,665.0L316.8,665.4L316.6,665.3L315.6,665.5L315.7,665.4L315.6,665.5L318.0,666.1L318.1,666.1L310.7,667.0L304.8,665.5L309.6,671.9L308.0,675.7L291.1,673.2L287.0,672.5L283.5,675.7L282.8,675.2L282.7,675.2L269.3,666.4L262.2,666.4L262.5,659.6L262.5,659.6L261.7,659.1L261.7,659.1L261.9,658.8L262.3,658.0L262.3,658.0L265.1,656.7L265.1,656.7L267.7,656.6L267.7,656.6L277.4,652.7L278.3,647.6L286.9,648.6L291.0,639.8L294.7,640.3Z', name: 'Dorset' },
  wiltshire: { d: 'M320.6,602.1L324.5,607.3L325.3,606.8L326.0,614.9L329.3,621.3L327.1,627.6L320.5,629.8L323.4,637.0L323.7,648.7L313.7,645.0L308.1,646.4L303.0,649.2L302.9,649.3L294.7,640.3L291.0,639.8L290.0,636.1L294.7,626.9L293.1,623.0L293.1,623.0L292.7,621.6L292.4,613.9L293.7,604.7L293.7,604.7L293.5,602.9L299.0,601.9L303.4,595.8L308.4,598.4L315.9,596.2L320.8,594.5L320.6,601.2L320.6,601.2Z', name: 'Wiltshire' },
  cambridgeshire: { d: 'M406.7,515.2L406.1,520.4L405.9,519.5L409.7,532.8L410.2,533.3L401.2,544.1L400.8,544.5L400.2,544.5L399.2,545.9L400.2,544.6L400.8,544.5L410.2,533.3L415.8,533.3L418.7,538.2L416.1,540.3L420.8,548.2L420.8,548.2L420.9,548.4L420.9,548.4L421.0,548.5L421.0,548.5L414.6,552.9L422.5,555.0L418.1,559.2L417.5,566.3L416.9,568.5L411.6,564.3L401.9,570.8L397.4,566.5L393.2,569.8L391.5,565.1L388.7,559.3L387.2,557.3L381.4,553.7L377.2,546.8L376.1,543.0L382.0,538.4L379.5,527.4L375.9,522.7L381.4,521.4L381.4,521.4L388.9,520.6L397.3,521.0Z', name: 'Cambridgeshire' },
  bedfordshire: { d: 'M387.2,557.3L388.7,559.3L391.5,565.1L387.4,571.7L387.4,571.7L382.0,572.3L380.9,577.5L382.3,580.7L383.1,582.5L380.0,583.2L373.1,584.2L366.2,578.0L368.5,573.5L367.8,567.6L371.3,562.9L367.8,556.5L370.5,550.1L377.2,546.8L381.4,553.7Z', name: 'Bedfordshire' },
  essex: { d: 'M427.8,605.8L427.6,606.0L427.7,605.9L427.8,606.2L427.0,606.0L427.4,606.0L427.0,606.0L424.0,605.2L424.0,605.8L424.0,605.2L425.7,605.9L425.7,606.0L426.0,605.9L423.3,606.3L423.9,605.9L423.3,606.3L422.6,606.3L422.4,606.0L422.3,605.9L421.8,605.8L421.9,605.8L422.3,605.9L418.9,611.5L408.5,609.4L413.3,603.8L408.1,599.3L405.2,599.5L399.8,599.1L398.2,597.7L398.2,595.2L399.4,588.9L401.5,587.8L402.8,587.5L402.8,587.5L405.5,586.5L406.5,584.6L402.0,572.4L401.9,570.8L411.6,564.3L416.9,568.5L417.5,566.3L419.5,566.0L419.5,566.0L429.2,564.8L435.0,573.7L446.3,574.6L447.6,574.8L447.6,574.8L458.6,575.9L456.0,578.8L457.7,581.8L457.5,581.8L456.1,584.8L447.2,588.5L443.5,582.4L437.9,587.7L437.8,590.8L437.8,590.8L438.1,592.5L438.2,592.5L438.1,592.5L438.2,592.5L442.8,591.4L442.1,598.7L427.9,598.1L425.7,599.4L425.4,599.4L425.0,599.5L425.4,599.4L425.7,599.4L438.9,600.0L436.8,605.6Z', name: 'Essex' },
  kent: { d: 'M442.8,620.1L455.5,617.6L464.8,616.6L461.7,622.6L461.3,623.4L461.1,623.3L461.1,622.9L461.0,622.7L460.5,622.6L460.2,622.2L459.0,622.1L458.0,622.0L457.8,622.0L457.5,621.9L456.7,621.3L456.7,621.3L456.3,621.2L456.0,621.2L455.9,621.3L455.9,621.4L455.8,621.6L455.5,621.7L455.3,621.8L455.5,621.7L455.8,621.6L455.9,621.4L455.9,621.4L455.9,621.3L456.0,621.2L456.3,621.2L456.7,621.3L457.5,621.9L457.8,622.0L458.0,622.0L459.0,622.1L460.2,622.2L460.5,622.6L461.0,622.7L461.1,623.3L460.4,624.4L460.3,624.5L460.5,624.7L460.3,624.5L460.4,624.4L461.3,623.4L461.4,623.7L461.4,624.2L461.6,624.4L461.5,624.4L461.4,625.0L461.6,625.2L461.4,625.0L461.5,624.4L461.5,624.4L461.6,624.4L461.4,624.2L461.4,623.7L462.1,622.5L462.2,622.5L462.6,635.3L455.4,638.4L444.0,645.5L444.2,652.0L438.4,651.3L434.9,646.5L426.8,644.8L421.1,643.5L421.1,643.5L417.2,639.5L413.5,636.7L413.5,636.7L408.4,636.9L408.4,636.9L406.2,635.5L401.1,635.1L400.7,624.1L405.7,615.4L405.9,615.4L408.2,611.8L408.4,611.5L413.4,611.3L420.1,612.0L421.1,609.6L432.3,612.6L423.3,615.2L419.8,620.5L420.7,623.3L420.9,623.3L421.4,623.5L420.9,623.3L420.7,623.3L420.0,618.5L423.7,615.3L427.8,618.0L427.8,618.0Z', name: 'Kent' },
  berkshire: { d: 'M341.9,606.0L350.8,610.5L354.8,611.6L357.2,605.3L359.7,605.3L366.6,604.0L369.0,608.6L376.1,609.0L375.1,610.9L374.5,610.8L374.6,613.5L370.1,616.6L367.8,617.2L362.8,621.1L360.0,619.6L355.4,618.6L355.4,618.6L353.0,619.1L353.1,618.9L333.4,618.1L332.5,620.8L329.3,621.3L326.0,614.9L325.3,606.8L337.0,604.2Z', name: 'Berkshire' },
  buckinghamshire: { d: 'M348.1,570.3L347.0,570.1L354.7,565.1L358.4,568.2L357.7,562.6L366.1,556.8L367.8,556.5L371.3,562.9L367.8,567.6L368.5,573.5L366.2,578.0L373.1,584.2L364.3,583.4L367.6,588.6L374.5,595.1L374.6,600.8L375.6,601.2L376.1,609.0L369.0,608.6L366.6,604.0L359.7,605.3L357.2,605.3L354.7,597.4L356.5,591.0Z', name: 'Buckinghamshire' },
  east_sussex: { d: 'M422.1,657.2L416.3,658.9L414.5,660.4L408.5,664.9L405.7,662.8L405.5,662.3L405.5,662.3L405.7,662.8L401.5,661.7L398.8,653.9L399.3,654.0L399.5,653.9L399.5,653.8L399.3,653.5L401.4,661.7L397.0,660.4L388.7,658.3L387.4,655.7L387.7,655.4L392.5,654.0L393.7,647.1L397.9,646.5L397.9,646.5L398.0,645.5L400.1,635.4L401.1,635.1L406.2,635.5L408.4,636.9L408.4,636.9L413.5,636.7L413.5,636.7L417.2,639.5L421.1,643.5L421.1,643.5L426.8,644.8L434.9,646.5L438.4,651.3L429.3,655.2Z', name: 'East Sussex' },
  hampshire: { d: 'M351.5,657.5L351.4,657.7L351.4,657.7L349.6,657.7L347.0,657.1L344.1,657.7L342.5,659.7L338.4,657.6L340.1,653.2L340.2,652.6L340.2,652.5L340.1,652.4L340.2,652.5L340.2,652.6L335.5,654.5L330.3,651.1L330.2,651.0L330.1,651.0L330.1,650.9L330.1,651.0L330.2,651.0L336.9,657.6L336.5,661.4L325.7,666.5L320.3,665.0L315.2,660.7L314.9,651.1L308.1,646.4L313.7,645.0L323.7,648.7L323.4,637.0L320.5,629.8L327.1,627.6L329.3,621.3L332.5,620.8L333.4,618.1L353.1,618.9L353.0,619.1L355.4,618.6L355.4,618.6L360.0,619.6L362.8,621.1L363.4,622.1L364.9,625.0L364.2,628.7L361.5,627.6L359.4,630.1L363.9,639.3L357.2,644.1L355.3,654.9L355.6,657.0L355.5,657.2L351.4,657.3Z', name: 'Hampshire' },
  isle_of_wight: { d: 'M338.6,662.9L349.2,668.6L344.0,675.1L338.4,676.8L329.6,670.0L325.6,670.6Z', name: 'Isle of Wight' },
  county_durham: { d: 'M326.5,346.9L328.3,347.3L328.4,347.3L330.1,352.6L336.3,348.6L341.2,359.7L341.2,359.7L341.2,359.7L336.4,364.6L336.4,364.6L334.8,366.0L332.1,369.9L325.4,371.1L320.8,368.1L320.1,374.6L309.4,381.0L298.2,380.8L298.1,374.9L292.0,369.8L289.6,361.7L291.6,354.2L296.1,354.7L299.6,350.1L306.5,347.8L312.1,349.4L314.4,344.9Z', name: 'County Durham' },
  cornwall: { d: 'M193.0,654.0L193.0,654.0L193.4,654.5L193.4,654.5L192.7,659.7L192.7,659.7L192.8,662.1L192.8,662.1L195.2,662.0L197.9,671.6L203.8,680.9L203.8,681.0L203.7,681.3L204.0,681.3L204.0,681.3L204.0,682.1L204.7,681.7L204.8,681.7L205.0,682.2L204.4,682.4L202.4,692.2L193.2,692.4L182.2,695.8L178.3,694.6L176.4,702.7L173.4,701.5L166.7,708.4L162.7,709.5L162.4,718.2L157.0,721.5L151.7,712.0L142.8,709.4L141.9,713.5L135.3,715.8L134.3,709.7L141.3,703.5L146.8,704.5L159.7,693.4L164.6,687.4L165.9,679.3L174.7,681.0L174.1,680.4L170.5,679.0L176.5,675.2L179.7,669.0L187.4,661.8L188.1,650.9Z', name: 'Cornwall' },
  northumberland: { d: 'M322.5,290.0L325.8,302.3L324.2,306.2L331.0,331.3L322.9,332.1L319.8,331.6L316.7,338.8L316.1,338.6L314.4,344.9L312.1,349.4L306.5,347.8L299.6,350.1L296.1,354.7L291.6,354.2L287.0,348.9L281.4,352.9L279.1,349.8L278.2,339.5L283.4,330.6L283.4,330.6L280.2,330.2L280.2,330.2L274.1,322.0L277.1,317.5L283.4,308.8L288.5,309.0L295.7,302.3L296.9,301.4L295.3,293.0L291.0,285.0L293.5,285.0L294.5,285.1L301.8,275.2L305.4,274.4L313.4,284.9Z', name: 'Northumberland' },
  cumbria: { d: 'M280.2,330.2L280.2,330.2L283.4,330.6L283.4,330.6L278.2,339.5L279.1,349.8L281.4,352.9L287.0,348.9L291.6,354.2L289.6,361.7L292.0,369.8L298.1,374.9L298.2,380.8L292.5,382.4L289.1,389.0L291.3,396.8L284.7,399.2L274.6,404.4L265.8,403.2L260.3,405.5L259.9,405.3L260.3,405.5L259.9,405.2L258.1,400.1L253.1,409.5L252.8,409.8L249.2,409.7L250.2,400.2L249.3,395.4L249.2,395.2L249.3,395.4L249.0,396.6L249.0,396.5L249.0,396.6L249.0,396.4L248.0,399.8L244.6,402.0L236.9,385.4L231.0,378.1L233.2,369.4L232.9,365.3L239.4,357.0L241.2,348.1L246.3,348.6L246.2,348.6L245.2,343.9L250.0,341.0L254.2,343.3L254.2,343.3L259.7,342.6L256.3,339.9L257.7,332.9L261.6,333.4L267.7,327.0L271.2,324.7L274.1,322.0Z', name: 'Cumbria' },
  hertfordshire: { d: 'M391.2,594.6L390.3,596.1L384.7,598.5L382.0,599.5L380.1,600.2L375.6,601.2L374.6,600.8L374.5,595.1L367.6,588.6L364.3,583.4L373.1,584.2L380.0,583.2L383.1,582.5L382.3,580.7L380.9,577.5L382.0,572.3L387.4,571.7L387.4,571.7L391.5,565.1L393.2,569.8L397.4,566.5L401.9,570.8L402.0,572.4L406.5,584.6L405.5,586.5L402.8,587.5L402.8,587.5L401.5,587.8L399.4,588.9L398.2,595.2L393.9,594.4Z', name: 'Hertfordshire' },
  norfolk: { d: 'M460.2,524.0L460.1,524.1L459.9,524.2L460.1,524.1L460.0,524.2L460.4,523.9L461,523.8L461.0,523.9L461.1,523.9L461.4,524.1L462.4,524.1L471.9,529.1L474.4,531.8L474.8,532.1L475.0,532.6L475.0,532.7L475.3,533.0L476.3,534.7L476.2,535.2L475.9,535.3L474.6,535.9L474.6,536.1L473.2,535.8L472.3,535.0L471.2,536.1L470.6,536.5L470.5,536.3L470.4,536.3L470.2,536.3L470.1,536.2L470.0,536.0L469.7,535.8L469.3,536.0L469.3,536.3L469.2,536.3L469.1,536.1L468.6,536.2L468.3,536.1L468.2,536.0L468.2,535.9L468.1,535.8L468.0,535.8L467.9,535.7L467.5,535.5L467.4,535.5L467.4,535.5L467.4,535.5L461.2,540.6L455.0,544.4L446.5,542.6L443.6,543.2L442.4,542.3L442.4,542.3L431.8,541.4L432.0,537.5L425.8,537.0L418.7,538.2L415.8,533.3L410.2,533.3L414.8,526.2L416.9,514.9L415.4,509.5L421.5,499.2L432.0,497.2L432.0,497.2L432.1,497.1L432.0,497.2L432.0,497.2L431.9,496.9L432.7,497.1L432.4,497.1L432.7,497.1L432.9,497.6L432.6,497.9L432.7,498.0L435.0,496.9L439.2,498.2L439.5,498.2L439.6,498.2L439.9,498.2L440.1,498.0L440.4,498.2L440.7,498.0L442.6,497.9L442.6,498.0L442.6,498.1L442.6,498.2L442.6,498.1L442.6,498.0L442.6,497.9L443.3,498.2L443.3,498.2L443.2,498.1L443.1,498.2L442.8,498.2L443.1,498.2L443.2,498.1L443.3,498.2L443.3,498.2L444.9,498.4L444.9,498.2L445.0,498.2L444.9,498.2L445.5,498.4L446.4,497.7L446.3,497.7L446.3,497.8L446.2,497.7L446.3,497.8L446.4,497.7L446.4,497.7L446.4,497.8L456.8,499.6L465.2,504.2L476.4,514.9L478.6,524.8L475.0,526.5L473.3,528.1L470.1,529.1L462.4,524.1L461.4,524.1L461.1,523.9L461,523.8L460.4,523.9ZM414.8,526.2L410.2,533.3L409.7,532.8L405.9,519.5L406.8,515.2L411.2,509.3L414.8,509.3Z', name: 'Norfolk' },
  northamptonshire: { d: 'M360.3,531.9L361.9,532.1L365.7,531.5L367.5,528.9L367.7,528.6L367.7,528.6L369.4,527.6L369.4,527.6L375.8,522.7L375.9,522.7L379.5,527.4L382.0,538.4L376.1,543.0L377.2,546.8L370.5,550.1L367.8,556.5L366.1,556.8L357.7,562.6L358.4,568.2L354.7,565.1L347.0,570.1L343.2,572.9L339.3,569.6L339.3,569.6L338.8,569.0L338.8,569.0L340.9,564.0L337.1,558.5L339.4,556.8L341.7,552.1Z', name: 'Northamptonshire' },
  oxfordshire: { d: 'M320.7,602.1L320.6,601.2L320.6,601.2L320.8,594.5L322.4,594.9L320.6,592.7L320.5,592.7L320.5,592.7L320.6,592.7L320.6,581.5L323.1,578.8L323.1,578.8L321.6,572.2L323.1,573.4L323.1,573.4L328.2,571.5L330.3,563.6L335.8,563.4L335.8,563.4L335.7,563.2L335.7,563.2L335.7,563.2L335.7,563.2L335.5,562.9L335.5,562.9L335.4,562.8L335.4,562.8L337.1,558.5L340.9,564.0L338.8,569.0L338.8,569.0L339.3,569.6L339.3,569.6L343.2,572.9L347.0,570.1Z', name: 'Oxfordshire' },
  suffolk: { d: 'M476.0,547.3L476.0,547.5L476.0,547.6L476.0,547.7L472.2,564.3L467.4,566.8L467.2,566.9L467.1,567.1L466.6,567.6L466.5,567.8L466.5,567.8L466.6,567.6L466.5,567.8L466.5,567.8L464.0,571.9L460.5,567.1L460.5,567.1L463.3,572.0L459.9,576.3L453.4,569.6L452.8,569.0L452.6,568.8L452.1,568.6L458.1,574.2L447.6,574.8L446.3,574.6L435.0,573.7L429.2,564.8L419.5,566.0L419.5,566.0L417.5,566.3L418.1,559.2L422.5,555.0L414.6,552.9L421.0,548.5L421.0,548.5L420.9,548.4L420.9,548.4L420.8,548.2L420.8,548.2L416.1,540.3L418.7,538.2L425.8,537.0L432.0,537.5L431.8,541.4L442.4,542.3L442.4,542.3L443.6,543.2L446.5,542.6L455.0,544.4L461.2,540.6L467.4,535.5L467.4,535.5L467.5,535.5L467.9,535.7L468.0,535.8L468.1,535.8L468.2,535.9L468.2,536.0L468.3,536.1L468.6,536.2L469.1,536.1L469.2,536.3L469.3,536.3L469.3,536.0L469.7,535.8L470.0,536.0L470.1,536.2L470.2,536.3L470.4,536.3L470.5,536.3L470.6,536.5L471.2,536.1L471.2,536.1L472.3,535.0L473.2,535.8L474.6,536.1L474.6,535.9L475.9,535.3L476.2,535.2L476.3,534.7L478.1,535.3L475.3,533.0L475.0,532.7L475.0,532.6L474.8,532.1L474.4,531.8L474.3,531.4L479.5,530.9L478.1,535.3L480,535.6L476.4,547.5L474.7,546.2L474.7,546.2L474.7,546.2L474.6,546.1L474.6,546.2L474.6,546.1L474.4,546.1L474.1,545.9L474.1,546.0L472.6,546.9L472.1,546.9L472.6,546.9L475.6,546.8Z', name: 'Suffolk' },
  surrey: { d: 'M398.9,621.4L400.7,624.1L401.1,635.1L400.1,635.4L392.4,635.2L392.3,633.9L390.6,633.3L387.0,635.4L379.3,637.9L376.0,638.7L363.9,639.3L359.4,630.1L361.5,627.6L364.2,628.7L364.9,625.0L363.4,622.1L362.8,621.1L367.8,617.2L370.1,616.6L374.6,613.5L374.5,610.8L375.1,610.9L377.5,611.9L380.6,614.4L381.0,615.4L384.0,616.6L383.4,621.4L384.6,620.9L387.4,617.6L388.5,621.3L391.5,621.9L393.0,624.5Z', name: 'Surrey' },
  warwickshire: { d: 'M342.1,551.7L341.7,552.1L339.4,556.8L337.1,558.5L335.4,562.8L335.4,562.8L335.5,562.9L335.5,562.9L335.7,563.2L335.7,563.2L335.7,563.2L335.7,563.2L335.8,563.4L335.8,563.4L330.3,563.6L328.2,571.5L323.1,573.4L323.1,573.4L321.6,572.2L322.6,568.6L322.6,568.6L321.1,568.5L321.1,568.5L321.0,568.5L321.0,568.5L320.8,568.4L320.8,568.4L320.6,568.4L320.6,568.4L316.9,562.7L308.7,559.5L309.1,552.2L311.6,547.7L312.0,543.4L316.5,544.9L324.2,542.2L324.2,542.2L324.6,541.8L330.9,543.0L331.1,536.8L327.4,536.0L324.9,536.7L321.1,538.2L317.5,532.4L315.9,526.7L320.0,526.4L322.5,521.4L325.1,519.1L326.9,520.6L326.4,526.0L331.1,529.4L333.1,530.8L337.4,533.3L338.2,533.9L343.1,541.2L341.8,545.0L341.8,545.0L341.7,549.4L341.7,549.4Z', name: 'Warwickshire' },
  west_sussex: { d: 'M400.1,635.4L398.0,645.5L397.9,646.5L397.9,646.5L393.7,647.1L392.5,654.0L387.7,655.4L387.4,655.7L388.7,658.3L385.1,656.4L384.8,655.9L384.9,655.6L384.9,655.5L384.8,655.9L385.1,656.4L383.4,659.1L378.6,660.1L372.3,659.2L372.5,658.2L372.7,657.6L373.2,656.4L373.5,656.0L374.4,655.4L373.7,654.4L373.6,654.4L373.5,654.5L372.8,653.9L373.5,654.5L373.7,654.4L373.8,655.5L373.5,656.0L373.2,656.4L372.7,657.6L372.5,658.2L372.3,659.2L363.8,663.4L363.8,663.3L363.4,662.4L362.3,666.1L355.5,657.2L355.6,657.0L355.3,654.9L357.2,644.1L363.9,639.3L376.0,638.7L379.3,637.9L387.0,635.4L390.6,633.3L392.3,633.9L392.4,635.2Z', name: 'West Sussex' },
  worcestershire: { d: 'M309.1,552.2L308.7,559.5L316.9,562.7L311.9,566.0L313.5,570.7L310.1,567.9L303.8,570.9L298.2,567.7L293.5,573.6L289.8,569.6L289.5,559.8L285.9,558.3L286.2,550.8L277.0,553.1L278.1,550.4L278.1,550.4L277.5,548.0L286.9,543.4L292.8,536.8L298.3,539.2L298.5,538.7L305.3,538.5L306.1,542.4L312.2,540.6L312.0,543.4L311.6,547.7Z', name: 'Worcestershire' },
  greater_manchester: { d: 'M293.5,447.4L299.3,442.1L304.8,446.6L305.7,447.3L310.3,453.4L307.8,455.6L304.9,461.8L304.6,466.4L298.2,469.5L298.2,469.5L297.7,469.4L297.7,469.4L297.5,469.3L297.5,469.3L294.9,467.3L291.5,467.5L286.3,465.1L285.3,462.9L283.4,459.4L279.3,460.6L273.4,455.9L273.4,455.9L272.2,454.8L274.2,448.2L277.1,449.1L279.2,448.4L279.2,448.4L279.2,448.4L279.2,448.4L279.2,448.6L279.2,448.6L279.4,448.8L279.4,448.8L282.4,446.5L285.2,445.3L285.2,445.3L288.5,446.1L288.9,446.1L288.9,446.1L288.9,443.3Z', name: 'Greater Manchester' },
  merseyside: { d: 'M272.2,454.8L273.4,455.9L273.4,455.9L279.3,460.6L274.7,460.0L274.1,465.3L271.5,464.0L268.1,468.2L267.8,469.4L260.4,465.2L259.3,461.2L255.0,453.2L262.0,441.5L262.0,441.6L262.0,441.5L262.0,441.5L261.9,441.4L261.8,441.0L262.1,441.4L262.3,442.4L262.0,442.3L262.3,442.4L257.6,453.0L264.9,456.1L267.9,457.5Z', name: 'Merseyside' },
  south_yorkshire: { d: 'M352.9,444.0L358.7,445.6L355.4,456.2L352.4,461.4L347.1,463.6L343.2,471.0L339.4,471.2L338.9,469.7L338.9,469.7L337.4,469.7L327.7,471.3L327.7,471.3L324.7,471.0L322.1,464.8L315.3,457.8L314.3,454.7L323.9,451.4L325.3,448.0L336.3,449.9L341.7,446.9L350.2,444.2L352.8,443.8Z', name: 'South Yorkshire' },
  tyne_and_wear: { d: 'M326.5,346.9L314.4,344.9L316.1,338.6L327.7,340.2L333.2,336.9L335.5,341.9L329.2,346.5L328.3,347.3Z', name: 'Tyne and Wear' },
  west_midlands_met: { d: 'M331.1,536.8L330.9,543.0L324.6,541.8L324.2,542.2L324.2,542.2L316.5,544.9L312.0,543.4L312.2,540.6L306.1,542.4L305.3,538.5L298.5,538.7L298.3,535.6L298.3,535.6L299.9,529.3L297.2,525.5L303.7,524.2L306.7,522.7L308.2,521L312.0,526.9L315.9,526.7L317.5,532.4L321.1,538.2L324.9,536.7L327.4,536.0Z', name: 'West Midlands' },
  west_yorkshire: { d: 'M337.9,424.7L336.1,428.4L338.4,437.5L341.7,446.9L336.3,449.9L325.3,448.0L323.9,451.4L314.3,454.7L310.3,453.4L305.7,447.3L304.8,446.6L299.3,442.1L298.0,438.9L300.9,432.4L303.2,430.9L304.0,428.9L307.6,421.0L311.7,420.8L318.7,424.2Z', name: 'West Yorkshire' },
  london: { d: 'M395.1,608.1L393.6,607.8L391.8,609.7L390.3,610.3L387.5,609.5L387.3,609.6L383.9,611.2L388.4,610.8L392.8,609.7L393.7,608.0L397.3,609.2L397.6,609.7L398.0,610.1L397.9,610.3L397.9,610.4L397.9,610.3L404.3,607.8L408.4,611.5L408.0,611.7L408.0,611.8L408.0,611.8L408.0,611.7L408.0,611.7L408.2,611.8L405.9,615.4L405.7,615.4L400.7,624.1L398.9,621.4L393.0,624.5L391.5,621.9L388.5,621.3L387.4,617.6L384.6,620.9L383.4,621.4L384.0,616.6L381.0,615.4L380.6,614.4L377.5,611.9L375.1,610.9L376.1,609.0L375.6,601.2L380.1,600.2L382.0,599.5L384.7,598.5L390.3,596.1L391.2,594.6L393.9,594.4L398.2,595.2L398.2,597.7L399.8,599.1L405.2,599.5L408.1,599.3L413.3,603.8L408.5,609.4L406.1,607.8L402.0,605.8L402.0,605.4L402.0,605.4L402.0,605.8L402.2,606.5L398.6,607.3L398.4,607.0L398.6,607.3Z', name: 'London' },
  scotland: { d: 'M313.9,136.1L313.8,136.1L313.6,136.5L312.5,138.3L312.5,138.3L312.5,138.3L311.4,139.5L308.3,142.9L308.3,142.9L303.3,153.5L303.7,160.8L303.7,160.9L302.7,163.2L302.4,163.6L302.1,164.2L297.0,176.7L296.9,176.7L295.3,183.1L285.5,192.6L285.5,192.6L283.8,203.3L281.1,208.2L267.2,216.0L257.3,217.3L246.9,226.3L263.4,217.8L268.9,218.9L270.2,227.9L278.9,232.3L268.5,240.0L263.2,237.9L252.6,246.1L251.7,250.3L240.8,254.2L225.5,249.1L218.8,244.8L221.7,247.4L226.0,252.9L235.9,255.3L240.0,256.0L251.4,256.4L256.1,259.9L263.4,257.7L269.6,250.1L276.9,251.2L289.1,260.0L299.7,262.4L304.5,271.1L300.2,277.1L294.5,285.1L293.5,285.0L291.0,285.0L296.9,301.4L295.7,302.3L290.2,304.8L276.1,316.3L277.1,317.5L271.2,324.7L267.7,327.0L266.3,328.6L257.7,332.9L253.0,340.3L233.9,339.2L232.2,347.6L227.6,346.5L214.5,356.0L205.9,355.0L193.6,346.9L197.0,352.4L194.3,363.1L194.3,363.1L175.9,348.6L168.9,352.9L172.6,366.8L168.2,362.8L167.0,355.7L158.5,344.2L162.5,335.9L165.2,337.5L167.5,325.7L173.6,318.9L174.1,311.1L183.2,301.5L182.9,291.0L171.4,280.3L173.7,276.4L172.2,265.9L175.6,258.6L184.9,261.3L196.9,266.0L202.8,268.7L203.9,268.6L204.1,269.2L204.2,269.3L204.1,269.2L203.9,268.6L195.2,264.7L185.1,259.9L172.6,250.7L168.0,267.0L158.2,259.9L157.5,269.9L150.8,263.9L151.2,255.9L157.6,244.8L149.3,255.2L146.7,252.4L147.7,264.5L152.4,274.1L146.2,279.7L145.8,289.3L141.2,302.0L143.1,307.5L139.1,312.4L130.0,313.0L130.2,305.5L133.5,302.5L135.7,281.7L140.6,274.8L136.0,270.7L138.8,261.4L135.2,263.9L134.3,258.3L143.8,240.1L138.5,244.6L143.7,233.1L139.4,234.8L140.3,227.8L146.5,217.6L156.1,219.0L156.1,219.0L162.6,211.4L162.5,210.8L157.8,217.5L145.1,215.3L152.0,203.7L162.9,185.9L156.1,191.7L141.1,210.1L135.2,214.0L123.7,208.1L120.5,201.2L125.9,199.0L125.8,199.0L125.2,199.0L123.3,198.0L114.0,198.4L110.3,195.4L110.3,195.3L110.9,194.1L116.5,191.7L116.5,191.7L127.9,192.6L132.1,189.6L127.4,185.7L132.7,181.0L129.0,181.3L124.3,180.7L128.6,170.9L134.9,168.1L130.5,165.4L133.6,161.5L144.5,162.9L135.0,157.2L137.6,150.2L143,147.5L133.2,147.6L142.3,141.4L138.1,137.3L130.5,141.9L126.7,128.5L129.4,121.3L136.9,127.6L129.1,115.8L135.5,112.1L129.6,107.4L129.3,97.9L135.0,96.8L138.1,105.5L138.3,92.0L146.1,98.1L147.5,93.3L156.0,92.4L163.8,101.3L163.9,101.3L156.7,91.8L158.2,89.0L147.4,81.9L146.6,76.8L153.1,79.6L154.5,76.0L152.7,71.1L148.4,64.4L153.0,65.3L161.5,61.6L158.7,54.7L163.4,50.8L161.7,47.6L161.7,47.6L162.5,46.7L163.5,45.0L163.0,43.7L166.9,29.9L167.2,30.0L170.5,30.9L183.1,37.3L178.2,45.8L190.4,34.7L193.8,36.8L193.7,38.1L191.4,46.2L198.7,37.6L203.0,38.2L203.2,37.7L203.3,37.7L204.8,37.1L205.3,37.2L205.8,37.1L205.7,37.1L206.6,35.5L208.0,35.1L208.7,35.6L210.1,35.6L210.1,35.6L210.2,35.5L212.2,33.0L213.0,34.5L215.1,34.9L219.9,35.6L225.9,33.1L234.9,30.3L242.6,32.9L240.6,28.8L258.6,28.4L255.7,37.0L255.7,37.1L255.7,37.1L257.4,43.1L254.7,52.6L248.6,58.8L247.4,59.0L247.3,59.0L237.3,68.4L233.0,72.8L212.9,89.8L211.3,101.4L223.1,99.4L214.0,112.2L211.6,108.2L199.5,113.5L193.5,122.4L201.9,114.4L213.7,113.4L202.5,128.7L205.1,130.0L212.8,120.0L217.4,121.3L224.4,117.4L235.9,114.2L244.1,109.3L258.5,114.5L268.9,111.8L270.7,112.0L270.8,112.1L271.3,112.2L271.3,112.2L271.3,112.2L284.2,113.9L284.8,113.8L291.1,112.4L292.7,112.3L306.1,112.1L314.1,118.8L316.5,131.2L316.2,131.8L316.2,131.9L315.5,132.7L315.5,132.7L315.4,133.1L315.1,133.5L314.5,134.2L314.4,135.1L314.0,135.9L314,135.9L314,135.9Z', name: 'Scotland' },
  wales: { d: 'M242.9,467.9L262.8,481.1L261.4,484.9L262.2,485.3L264.7,487.7L264.7,488.0L266.1,490.7L266.0,491.1L266.8,493.6L268.3,495.6L268.4,495.6L269.8,495.5L269.9,495.5L272.4,496.3L271.6,500.9L263.0,499.8L261.7,498.9L261.2,498.2L257.1,500.6L252.9,503.5L253.1,503.9L253.0,506.1L252.4,511.0L257.4,512.7L259.9,515.2L257.4,521.7L257.0,522.2L257.0,523.4L253.8,526.8L253.5,527.0L253.3,527.4L259.1,527.6L259.7,531.5L259.2,531.7L255.6,533.4L249.5,536.6L249.0,537.0L251.8,540.6L252.3,541.3L255.8,544.0L260.9,544.4L260.8,546.4L259.4,550.4L259.5,550.4L261.3,551.5L255.6,555.6L255.6,559.4L255.6,559.3L256.1,559.0L254.6,566.5L256.6,572.5L261.2,578.4L266.3,576.7L273.2,583.3L274.5,583.4L274.7,583.5L275.2,583.6L275.6,599.5L268.0,604.6L260.8,605.5L260.1,600.6L265.0,598.2L262.4,599.6L255.9,608.5L249.6,610.5L251.9,615.6L243.9,617.5L233.8,616.0L231.0,610.4L224.4,605.9L224.5,606.0L224.5,606.0L218.7,599.9L214.5,603.5L199.1,603.9L202.1,599.1L203.2,599.3L211.1,592.8L209.6,596.4L198.4,595.3L196.8,592.0L196.9,592.0L197.6,591.9L197.8,592.0L198.4,592.1L196.0,587.9L191.9,591.4L184.1,591.1L180.0,597.4L173.5,597.7L170.5,601.5L164.8,599.7L161.9,594.3L172.4,592.5L172.6,588.5L167.8,593.8L157.5,590.8L161.6,588.6L160.6,581.4L152.2,581.6L152.9,578.1L163.1,573.6L162.9,570.1L174.5,569.3L179.5,562.3L182.2,565.0L183.4,565.5L183.5,565.4L183.6,565.4L183.9,566.7L181.6,561.4L190.0,560.6L203.8,551.3L209.2,541.2L210.7,531.5L216.8,528.7L218.4,527.5L210.4,530.2L207.4,524.7L210.7,517.5L207.2,508.7L207.4,501.0L192.2,505.0L188.5,510.4L177.8,510.6L183.4,502.3L189.3,499.7L197.0,492.5L199.2,485.0L207.7,476.8L213.1,476.0L223.7,469.7L226.1,472.1L236.7,471.8L238.4,473.3L236.1,470.9ZM206.0,477.4L196.8,484.9L193.0,482.8L186.3,472.7L186.8,463.8L200.3,463.3L204.1,472.2L211.5,471.1Z', name: 'Wales' },
  northern_ireland: { d: 'M126.8,362.4L124.7,365.7L127.4,366.8L132.7,363.3L140.3,363.5L147.0,378.5L143.1,391.5L136.3,399.2L132.5,397.2L126.0,400.3L125.0,409.3L117.8,415.4L116.3,412.2L107.2,408.3L100.1,412.7L89.7,411.3L90.8,403.0L82.9,399.5L80.7,391.0L73.0,383.8L65.6,390.4L67.5,399.3L58.6,405.6L48.1,407.2L41.8,400.7L34.4,399.9L20,380.1L26.0,378.5L27.7,373.8L34.9,374.9L41.8,368.8L34.9,367.1L31.8,361.3L39.6,361.2L48.9,354.3L53.9,347.4L58.3,333.2L67.5,333.6L71.6,333.5L76.6,321.8L86.1,323.7L98.8,316.9L109.7,320.8L114.2,319.0L119.5,324.5L118.0,332.1L121.8,332.8L123.9,339.9L135.0,356.2Z', name: 'Northern Ireland' },
};

const STATUS_FILLS: Record<RegionStatus, { base: string; hover: string }> = {
  active: { base: 'var(--orange-400)', hover: 'var(--orange-500)' },
  coming_soon: { base: 'var(--warm-700)', hover: 'var(--warm-800)' },
  inactive: { base: 'var(--warm-200)', hover: 'var(--warm-300)' },
};

const STATUS_LABELS: Record<RegionStatus, string> = {
  active: 'We cover this area',
  coming_soon: 'Coming soon',
  inactive: '',
};

export default function UKCoverageMap({ regions }: UKCoverageMapProps) {
  const regionMap = new Map(regions.map((r) => [r.id, r]));
  const svgRef = useRef<SVGSVGElement>(null);
  const [tooltip, setTooltip] = useState<{
    x: number;
    y: number;
    name: string;
    status: RegionStatus;
  } | null>(null);

  const handleMouseMove = useCallback(
    (e: React.MouseEvent<SVGPathElement>, name: string, status: RegionStatus) => {
      const svg = svgRef.current;
      if (!svg) return;
      const rect = svg.getBoundingClientRect();
      setTooltip({
        x: e.clientX - rect.left,
        y: e.clientY - rect.top,
        name,
        status,
      });
    },
    [],
  );

  const handleMouseLeave = useCallback(() => setTooltip(null), []);

  return (
    <div className="relative">
      <svg
        ref={svgRef}
        viewBox="0 0 500 750"
        className="w-full h-auto max-h-[600px]"
        xmlns="http://www.w3.org/2000/svg"
        role="img"
        aria-label="UK coverage map showing areas we serve and areas coming soon"
      >
        {/* Silhouette fill behind all regions to cover sub-pixel gaps */}
        <path
          d={Object.values(REGION_PATHS).map((r) => r.d).join(' ')}
          fill="var(--warm-700)"
          stroke="var(--warm-700)"
          strokeWidth="1.5"
          strokeLinejoin="round"
        />
        {Object.entries(REGION_PATHS).map(([id, { d, name: defaultName }]) => {
          const region = regionMap.get(id);
          const status: RegionStatus = region?.status ?? 'inactive';
          const name = region?.name ?? defaultName;
          const fills = STATUS_FILLS[status];

          return (
            <path
              key={id}
              d={d}
              fill={fills.base}
              stroke="var(--warm-white)"
              strokeWidth="0.5"
              strokeLinejoin="round"
              style={{ paintOrder: 'stroke fill' }}
              className="transition-[fill] duration-150 cursor-pointer"
              onMouseEnter={(e) => {
                (e.target as SVGPathElement).style.fill = fills.hover;
                handleMouseMove(e, name, status);
              }}
              onMouseMove={(e) => handleMouseMove(e, name, status)}
              onMouseLeave={(e) => {
                (e.target as SVGPathElement).style.fill = fills.base;
                handleMouseLeave();
              }}
            />
          );
        })}
      </svg>

      {/* Floating tooltip */}
      {tooltip && (
        <div
          className="pointer-events-none absolute z-10 rounded bg-green-900/90 px-2 py-1 shadow-md backdrop-blur-sm"
          style={{
            left: tooltip.x,
            top: tooltip.y - 32,
            transform: 'translateX(-50%)',
          }}
        >
          <span className="text-xs font-medium text-white whitespace-nowrap font-[family-name:var(--font-heading)]">
            {tooltip.name}
          </span>
          {STATUS_LABELS[tooltip.status] && (
            <span className="text-[10px] text-warm-300 whitespace-nowrap ml-1.5">
              {STATUS_LABELS[tooltip.status]}
            </span>
          )}
        </div>
      )}

      {/* Legend */}
      <div className="flex flex-col gap-3 mt-6">
        <div className="flex items-center gap-2.5">
          <span
            className="w-5 h-5 rounded"
            style={{ backgroundColor: 'var(--orange-400)' }}
          />
          <span className="text-sm font-medium text-warm-700 font-[family-name:var(--font-heading)]">
            Area we cover
          </span>
        </div>
        <div className="flex items-center gap-2.5">
          <span
            className="w-5 h-5 rounded"
            style={{ backgroundColor: 'var(--warm-700)' }}
          />
          <span className="text-sm font-medium text-warm-700 font-[family-name:var(--font-heading)]">
            Coming soon
          </span>
        </div>
      </div>
    </div>
  );
}
